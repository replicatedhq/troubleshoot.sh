[build]
  publish = "public"
  command = "yarn build"

[build.environment]
  NODE_VERSION = "18.20.4"
  NPM_VERSION = "10.8.2"
  YARN_VERSION = "1.22.22"
  NETLIFY_RESTORE = "1"
  # Force Sharp to use prebuilt binaries - specific target configuration
  npm_config_sharp_binary_host = "https://github.com/lovell/sharp-libvips/releases/download/"
  npm_config_sharp_libvips_binary_host = "https://github.com/lovell/sharp-libvips/releases/download/"
  npm_config_target_platform = "linux"
  npm_config_target_arch = "x64"
  npm_config_target_libc = "glibc"
  npm_config_runtime = "napi"
  npm_config_target = "7"
  npm_config_fallback_to_build = "false"
  npm_config_build_from_source = "false"
  # Additional Sharp environment variables
  SHARP_IGNORE_GLOBAL_LIBVIPS = "1"
  SHARP_FORCE_GLOBAL_LIBVIPS = "false"
  # Also GA_TRACKING_ID and ALGOLIA_API_KEY which are specified in Netlify UI

[[plugins]]
  package = "netlify-plugin-gatsby-yarn-cache"
